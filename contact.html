<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Encryptify | Contacto</title>
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
      (function () {
        emailjs.init("P-MYFtgGFfMP9k_Us"); // Reemplaza con tu User ID de EmailJS
      })();
    </script>
    <style>
      .required {
        color: red;
        font-weight: bold;
        margin-left: 4px;
      }
      #status {
        margin-top: 10px;
        font-weight: bold;
      }
      #status.error {
        color: red;
      }
      #status.success {
        color: green;
      }
      .note {
        font-size: 0.9em;
        color: #555;
        margin-top: 8px;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="menu">
        <a href="index.html" class="brand">
          <img src="assets/img/logo.png" alt="Logo Encryptify" class="logo" />
        </a>
        <h1 class="site-title">Encryptify</h1>
        <nav id="primary-nav" class="menu-links" role="navigation">
          <a href="overview.html" class="menu-btn"
            ><i class="fa-solid fa-chart-pie"></i> Visi√≥n General</a
          >
          <a href="pricing-planes.html" class="menu-btn"
            ><i class="fa-solid fa-tags"></i> Planes</a
          >
          <a href="downloads.html" class="menu-btn"
            ><i class="fa-solid fa-download"></i> Descargar</a
          >
          <a href="developer.html" class="menu-btn"
            ><i class="fa-solid fa-user-gear"></i> Desarrollador</a
          >
          <a href="contact.html" class="menu-btn active"
            ><i class="fa-solid fa-envelope"></i> Contacto</a
          >
        </nav>
      </div>
    </header>

    <main>
      <section class="intro">
        <h2><i class="fa-solid fa-envelope"></i> Contacto</h2>
        <p>
          Rellena el siguiente formulario para ponerte en contacto con nosotros.
          Selecciona el plan que te interesa y te responderemos lo antes
          posible.
        </p>
      </section>

      <section class="contact-form">
        <form id="contact-form">
          <div class="form-group">
            <label for="name"
              >Nombre completo <span class="required">*</span></label
            >
            <input type="text" id="name" name="name" required />
          </div>

          <div class="form-group">
            <label for="email"
              >Correo electr√≥nico <span class="required">*</span></label
            >
            <input type="email" id="email" name="email" required />
          </div>

          <div class="form-group">
            <label for="plan"
              >Plan de inter√©s <span class="required">*</span></label
            >
            <select id="plan" name="plan" required>
              <option value="">-- Selecciona un plan --</option>
              <option value="gratuito">Gratuito</option>
              <option value="educativo">Educativo</option>
              <option value="freelance">Freelance</option>
              <option value="legal">Legal</option>
              <option value="forense">Forense</option>
            </select>
          </div>

          <div class="form-group">
            <label for="message">Mensaje <span class="required">*</span></label>
            <textarea id="message" name="message" rows="5" required></textarea>
          </div>

          <button type="submit" class="btn-download">
            <i class="fa-solid fa-paper-plane"></i> Enviar mensaje
          </button>
          <p class="note">
            Los campos marcados con <span class="required">*</span> son
            obligatorios.
          </p>
        </form>
        <p id="status"></p>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 Encryptify. Desarrollado por Iv√°n V√°zquez Vidador.</p>
    </footer>

    <script>
      document
        .getElementById("contact-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const name = document.getElementById("name").value.trim();
          const email = document.getElementById("email").value.trim();
          const plan = document.getElementById("plan").value.trim();
          const message = document.getElementById("message").value.trim();
          const status = document.getElementById("status");

          console.clear();
          console.log("üì© Iniciando env√≠o de formulario...");
          console.log("Valores capturados:", { name, email, plan, message });

          if (!name || !email || !plan || !message) {
            status.className = "error";
            status.innerHTML =
              "‚ö†Ô∏è Por favor, completa todos los campos obligatorios.";
            console.warn("‚ùå Validaci√≥n fallida: faltan campos obligatorios");
            return;
          }

          // Verificar inicializaci√≥n
          try {
            console.log("üîë Verificando inicializaci√≥n de EmailJS...");
            if (!emailjs) {
              throw new Error("EmailJS no est√° cargado");
            }
          } catch (err) {
            console.error("‚ùå Error: EmailJS no est√° disponible", err);
            status.className = "error";
            status.innerHTML = "‚ùå Error interno: EmailJS no cargado.";
            return;
          }

          // Env√≠o con EmailJS
          console.log("üöÄ Enviando con EmailJS...");
          emailjs
            .send("service_20e3u9c", "template_0xkivdo", {
              name: name,
              email: email,
              plan: plan,
              message: message,
            })
            .then(
              function (response) {
                console.log("‚úÖ Respuesta de EmailJS:", response);
                status.className = "success";
                status.innerHTML =
                  "‚úÖ Tu mensaje ha sido enviado correctamente.";
                document.getElementById("contact-form").reset();
              },
              function (error) {
                console.error("‚ùå Error al enviar con EmailJS:", error);
                status.className = "error";
                status.innerHTML =
                  "‚ùå Error al enviar el mensaje. Revisa la consola.";
              }
            );
        });
    </script>
  </body>
</html>
